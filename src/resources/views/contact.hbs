<div class="container-contact">
    <div class="contact">
        <div class="contact-left">
            <div class="left-content">
                <div class="feedback">
                    <h2>Get in touch!</h2>
                    <div class="feedback-sub">
                        <span>
                            feel free to contact us and <br> we will get
                            back to you as soon as we can.
                        </span>
                    </div>
                    <form class="contact-form" method="post" action="/">
                        <input type="text" placeholder="name" required name="contact_name" id="name"
                            oninvalid="this.setCustomValidity('Enter your name')" oninput="this.setCustomValidity('')">
                        <input type="text" placeholder="email address" required name="contact_mail" id="email"
                            oninvalid="this.setCustomValidity('Enter your email address')"
                            oninput="this.setCustomValidity('')">
                        <input type="text" placeholder="message" required name="contact_problem" id="message"
                            oninvalid="this.setCustomValidity('Your message')" oninput="this.setCustomValidity('')">
                        <button type="submit" class="button-contact btn btn-primary btn-lg col-md-12 text-center my-5" id="liveAlertBtn">send</button>
                        <div id="liveAlertPlaceholder"></div>
                    </form>
                </div>
            </div>
            <div class="right-content">
                <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d10951.116710643588!2d-135.01080712104743!3d57.782325506111974!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e1!3m2!1svi!2s!4v1669277158824!5m2!1svi!2s" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>
    </div>
</div>

<script>
    const contactForm = document.querySelector('.contact-form');

    let name = document.getElementById('name');
    let email = document.getElementById('email');
    let message = document.getElementById('message');

    contactForm.addEventListener('submit', (e) => {
        e.preventDefault();
        
        let formData = {
            name: name.value,
            email: email.value,
        }
        let xhr = new XMLHttpRequest();
        xhr.open('POST', '/');
        xhr.setRequestHeader('content-type', 'application/json');
        xhr.onload = function() {
            console.log(xhr.responseText);
            if(xhr.responseText == 'success') {
                alert('We have received your message. Thank you!');
                name.value = '';
                email.value = '';
                message.value = '';
            } else {
                alert('Something went wrong');
            }
        }
        xhr.send(JSON.stringify(formData));
    })
</script>

    {{!-- const alertPlaceholder = document.getElementById('liveAlertPlaceholder')

    const alert = (message, type) => {
        const wrapper = document.createElement('div')
        wrapper.innerHTML = [
                `<div class="alert alert-${type} alert-dismissible" role="alert">`,
                `   <div>${message}</div>`,
                '   <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>',
                '</div>'
        ].join('')

        alertPlaceholder.append(wrapper)
    }

    const alertTrigger = document.getElementById('liveAlertBtn')
    if (alertTrigger) {
        alertTrigger.addEventListener('click', () => {
            alert('Nice, you triggered this alert message!', 'success')
        })
    } --}}